# Bug Report: BUG-081

## Title
Dual session ID systems: SessionManager vs CLAUDE_SESSION_ID env var

## First Noticed On Commit
9eb86cd (Merge task BUG-082)

## Reproduction Steps
1. Claude Code sets CLAUDE_SESSION_ID env var for each session
2. User calls start_session MCP tool, which generates a UUID via uuid.uuid4()
3. ObservationCollector.start_session() generates session_YYYYMMDD_HHMMSS_random6 format
4. Both systems write to the same .session_id file with conflicting formats
5. Orphan detection fails because session ID comparisons use mismatched sources

## Expected Behavior
A single, consistent session ID should be used across all components. When Claude Code
provides CLAUDE_SESSION_ID via env var, all components should use that value. When no
env var is set, all components should agree on the same generated format.

## Actual Behavior
Three independent session ID systems conflict:
1. SessionManager in src/calm/tools/session.py generates UUIDs (e.g. "a1b2c3d4-...")
2. ObservationCollector in src/calm/ghap/collector.py generates "session_YYYYMMDD_HHMMSS_random6"
3. CLAUDE_SESSION_ID env var in src/calm/hooks/pre_tool_use.py is separate from both

Systems 1 and 2 write different formats to the same .session_id file, causing race
conditions. System 3 is completely independent, so hook-based session tracking never
matches the MCP tool session tracking.

## Root Cause
The session ID systems were developed independently:
- SessionManager.start_session() used uuid.uuid4() (UUID format)
- ObservationCollector.start_session() used generate_session_id() (timestamped format)
- Pre-tool-use hook read CLAUDE_SESSION_ID from environment
None of these three systems were aware of each other, causing format mismatches and
conflicting writes to the shared .session_id file.

## Fix Plan
1. Add module-level get_session_id() function to src/calm/tools/session.py that checks
   CLAUDE_SESSION_ID env var first, then falls back to .session_id file
2. Update SessionManager.get_current_session_id() to delegate to get_session_id()
3. Update start_session() tool to use CLAUDE_SESSION_ID when available, falling back
   to ObservationCollector format (generate_session_id()) instead of UUID
4. Remove uuid import, add os import and generate_session_id import
5. Update tests to verify priority ordering (env var > file) and format consistency
