# Bug Report: BUG-088

## Title
Hooks fail silently with no logging or visibility

## First Noticed On Commit
9eb86cd5096a5e015438ed836f057f4459d71928

## Reproduction Steps
1. Introduce a condition that causes a hook to fail (e.g., corrupted database, missing table, permission error on ~/.calm/)
2. Trigger the affected hook (start a session, submit a prompt, use a tool)
3. Observe that no output is produced and no error is recorded anywhere
4. The user has no way to know the hook failed or diagnose what went wrong

## Expected Behavior
When a hook encounters an error, the error should be logged to a file that users can inspect for debugging, while stdout remains empty to avoid breaking Claude Code.

## Actual Behavior
All 4 hooks (SessionStart, UserPromptSubmit, PreToolUse, PostToolUse) catch exceptions and silently discard them with no logging. Users have zero visibility into hook failures.

Affected exception handlers (10 total across the 4 main hooks):
- `session_start.py`: ensure_server_running (OSError), get_orphaned_ghap (sqlite3/OS), get_active_tasks (sqlite3/OS)
- `user_prompt_submit.py`: get_relevant_memories (sqlite3/OS), get_relevant_experiences (sqlite3/OS), main (Exception)
- `pre_tool_use.py`: read_tool_count (JSON/OS/Key), write_tool_count (OS), get_active_ghap (sqlite3/OS)
- `post_tool_use.py`: get_active_ghap (sqlite3/OS)

Additionally, `skill_loader.py` had 1 unlogged exception handler.

## Root Cause
The hooks were designed to never block Claude Code by catching all exceptions and outputting empty strings. This is correct behavior for stdout, but there was no secondary logging mechanism to record what went wrong. The "fail silently" pattern made debugging impossible.

## Fix Plan
1. Add `log_hook_error(hook_name, exc)` helper function in `common.py`
2. Add `get_hook_error_log_path()` function returning `~/.calm/hook_errors.log`
3. Log format: `[timestamp] hook=name exception=Type message=msg` followed by full traceback
4. Add log rotation: if hook_errors.log exceeds 1 MB, rename to hook_errors.log.1 (keep 1 backup)
5. `log_hook_error()` itself never raises -- wraps everything in try/except
6. Update all 10 exception handlers in the 4 hook files + 1 in skill_loader.py to call `log_hook_error()`
7. Preserve existing stdout behavior (empty string on error)
8. Add regression tests for: log creation, log content, rotation, stdout silence, and per-hook logging
