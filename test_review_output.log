============================= test session starts ==============================
platform darwin -- Python 3.12.12, pytest-9.0.1, pluggy-1.6.0 -- /Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-11/.venv/bin/python3
cachedir: .pytest_cache
rootdir: /Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-11
configfile: pyproject.toml
plugins: anyio-4.12.0, asyncio-1.3.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 42 items

tests/server/tools/test_code.py::test_index_codebase_not_available 2025-12-04 11:38:14 [info     ] code.index                     directory=/tmp project=test
PASSED
tests/server/tools/test_code.py::test_search_code_not_available 2025-12-04 11:38:14 [info     ] code.search                    project=None query=test
PASSED
tests/server/tools/test_code.py::test_find_similar_code_not_available 2025-12-04 11:38:14 [info     ] code.find_similar              snippet_len=9
PASSED
tests/server/tools/test_code.py::test_search_code_empty_query 2025-12-04 11:38:14 [info     ] code.search                    project=None query='   '
PASSED
tests/server/tools/test_code.py::test_search_code_limit_validation 2025-12-04 11:38:14 [info     ] code.search                    project=None query=test
2025-12-04 11:38:14 [info     ] code.search                    project=None query=test
PASSED
tests/server/tools/test_code.py::test_find_similar_code_snippet_too_long 2025-12-04 11:38:14 [info     ] code.find_similar              snippet_len=6000
PASSED
tests/server/tools/test_code.py::test_find_similar_code_empty_snippet 2025-12-04 11:38:14 [info     ] code.find_similar              snippet_len=3
PASSED
tests/server/tools/test_code.py::test_find_similar_code_limit_validation 2025-12-04 11:38:14 [info     ] code.find_similar              snippet_len=4
2025-12-04 11:38:14 [info     ] code.find_similar              snippet_len=4
PASSED
tests/server/tools/test_code.py::test_index_codebase_directory_not_found 2025-12-04 11:38:14 [info     ] code.index                     directory=/private/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/pytest-of-elliotmilco/pytest-540/test_index_codebase_directory_0/nonexistent project=test
PASSED
tests/server/tools/test_code.py::test_index_codebase_not_a_directory 2025-12-04 11:38:14 [info     ] code.index                     directory=/private/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/pytest-of-elliotmilco/pytest-540/test_index_codebase_not_a_dire0/test.txt project=test
PASSED
tests/server/tools/test_code.py::test_search_code_with_filters 2025-12-04 11:38:14 [info     ] code.search                    project=test-project query='test function'
2025-12-04 11:38:14 [info     ] code.searched                  count=1
PASSED
tests/server/tools/test_code.py::test_find_similar_code_with_project_filter 2025-12-04 11:38:14 [info     ] code.find_similar              snippet_len=16
2025-12-04 11:38:14 [info     ] code.similar_found             count=0
PASSED
tests/server/tools/test_git.py::test_search_commits_not_available 2025-12-04 11:38:14 [info     ] git.search_commits             author=None query=test
PASSED
tests/server/tools/test_git.py::test_get_file_history_not_available 2025-12-04 11:38:14 [info     ] git.file_history               limit=100 path=test.py
PASSED
tests/server/tools/test_git.py::test_get_churn_hotspots_not_available 2025-12-04 11:38:14 [info     ] git.churn_hotspots             days=90 limit=10
PASSED
tests/server/tools/test_git.py::test_get_code_authors_not_available 2025-12-04 11:38:14 [info     ] git.code_authors               path=test.py
PASSED
tests/server/tools/test_git.py::test_search_commits_empty_query 2025-12-04 11:38:14 [info     ] git.search_commits             author=None query='   '
PASSED
tests/server/tools/test_git.py::test_search_commits_limit_validation 2025-12-04 11:38:14 [info     ] git.search_commits             author=None query=test
2025-12-04 11:38:14 [info     ] git.search_commits             author=None query=test
PASSED
tests/server/tools/test_git.py::test_search_commits_invalid_date_format 2025-12-04 11:38:14 [info     ] git.search_commits             author=None query=test
PASSED
tests/server/tools/test_git.py::test_get_file_history_limit_validation 2025-12-04 11:38:14 [info     ] git.file_history               limit=0 path=test.py
2025-12-04 11:38:14 [info     ] git.file_history               limit=501 path=test.py
PASSED
tests/server/tools/test_git.py::test_get_file_history_file_not_found 2025-12-04 11:38:14 [info     ] git.file_history               limit=100 path=nonexistent.py
PASSED
tests/server/tools/test_git.py::test_get_churn_hotspots_days_validation 2025-12-04 11:38:14 [info     ] git.churn_hotspots             days=0 limit=10
2025-12-04 11:38:14 [info     ] git.churn_hotspots             days=366 limit=10
PASSED
tests/server/tools/test_git.py::test_get_churn_hotspots_limit_validation 2025-12-04 11:38:14 [info     ] git.churn_hotspots             days=90 limit=0
2025-12-04 11:38:14 [info     ] git.churn_hotspots             days=90 limit=51
PASSED
tests/server/tools/test_git.py::test_get_code_authors_file_not_found 2025-12-04 11:38:14 [info     ] git.code_authors               path=nonexistent.py
PASSED
tests/server/tools/test_memory.py::test_store_memory_success 2025-12-04 11:38:14 [info     ] memory.store                   category=fact importance=0.8
2025-12-04 11:38:14 [info     ] memory.stored                  category=fact memory_id=2dd31e95-28b3-417c-a690-92ecc7c03a95
PASSED
tests/server/tools/test_memory.py::test_store_memory_invalid_category 2025-12-04 11:38:14 [info     ] memory.store                   category=invalid importance=0.5
PASSED
tests/server/tools/test_memory.py::test_store_memory_content_too_long 2025-12-04 11:38:14 [info     ] memory.store                   category=fact importance=0.5
PASSED
tests/server/tools/test_memory.py::test_store_memory_importance_out_of_range 2025-12-04 11:38:14 [info     ] memory.store                   category=fact importance=1.5
2025-12-04 11:38:14 [info     ] memory.store                   category=fact importance=-0.1
PASSED
tests/server/tools/test_memory.py::test_store_memory_default_values 2025-12-04 11:38:14 [info     ] memory.store                   category=fact importance=0.5
2025-12-04 11:38:14 [info     ] memory.stored                  category=fact memory_id=161a0def-1515-4c90-a4ef-9146d3db4ebf
PASSED
tests/server/tools/test_memory.py::test_retrieve_memories_success 2025-12-04 11:38:14 [info     ] memory.retrieve                limit=10 query='test query'
2025-12-04 11:38:14 [info     ] memory.retrieved               count=1
PASSED
tests/server/tools/test_memory.py::test_retrieve_memories_empty_query 2025-12-04 11:38:14 [info     ] memory.retrieve                limit=10 query='   '
PASSED
tests/server/tools/test_memory.py::test_retrieve_memories_with_filters 2025-12-04 11:38:14 [info     ] memory.retrieve                limit=5 query=test
2025-12-04 11:38:14 [info     ] memory.retrieved               count=0
PASSED
tests/server/tools/test_memory.py::test_retrieve_memories_invalid_category 2025-12-04 11:38:14 [info     ] memory.retrieve                limit=10 query=test
PASSED
tests/server/tools/test_memory.py::test_retrieve_memories_limit_validation 2025-12-04 11:38:14 [info     ] memory.retrieve                limit=0 query=test
2025-12-04 11:38:14 [info     ] memory.retrieve                limit=101 query=test
PASSED
tests/server/tools/test_memory.py::test_list_memories_success 2025-12-04 11:38:14 [info     ] memory.list                    category=None limit=10 offset=0
2025-12-04 11:38:14 [info     ] memory.listed                  count=1 total=1
PASSED
tests/server/tools/test_memory.py::test_list_memories_pagination 2025-12-04 11:38:14 [info     ] memory.list                    category=None limit=2 offset=2
2025-12-04 11:38:14 [info     ] memory.listed                  count=2 total=5
PASSED
tests/server/tools/test_memory.py::test_list_memories_with_filters 2025-12-04 11:38:14 [info     ] memory.list                    category=fact limit=50 offset=0
2025-12-04 11:38:14 [info     ] memory.listed                  count=0 total=0
PASSED
tests/server/tools/test_memory.py::test_list_memories_invalid_offset 2025-12-04 11:38:14 [info     ] memory.list                    category=None limit=50 offset=-1
PASSED
tests/server/tools/test_memory.py::test_list_memories_limit_validation 2025-12-04 11:38:14 [info     ] memory.list                    category=None limit=0 offset=0
2025-12-04 11:38:14 [info     ] memory.list                    category=None limit=201 offset=0
PASSED
tests/server/tools/test_memory.py::test_delete_memory_success 2025-12-04 11:38:14 [info     ] memory.delete                  memory_id=test-id
2025-12-04 11:38:14 [info     ] memory.deleted                 memory_id=test-id
PASSED
tests/server/tools/test_memory.py::test_delete_memory_not_found 2025-12-04 11:38:14 [info     ] memory.delete                  memory_id=nonexistent
2025-12-04 11:38:14 [warning  ] memory.delete_failed           error='Not found' memory_id=nonexistent
PASSED
tests/server/tools/test_memory.py::test_all_valid_categories_accepted 2025-12-04 11:38:14 [info     ] memory.store                   category=preference importance=0.5
2025-12-04 11:38:14 [info     ] memory.stored                  category=preference memory_id=f75e1db9-612d-48c1-b979-b10367928922
2025-12-04 11:38:14 [info     ] memory.store                   category=fact importance=0.5
2025-12-04 11:38:14 [info     ] memory.stored                  category=fact memory_id=68e05b75-4220-494e-99f3-f46bc3f4871c
2025-12-04 11:38:14 [info     ] memory.store                   category=event importance=0.5
2025-12-04 11:38:14 [info     ] memory.stored                  category=event memory_id=6e7df94d-6b87-4890-b207-80a9a51eb0e7
2025-12-04 11:38:14 [info     ] memory.store                   category=workflow importance=0.5
2025-12-04 11:38:14 [info     ] memory.stored                  category=workflow memory_id=babfa8a6-e0e0-43cb-8448-582575860d44
2025-12-04 11:38:14 [info     ] memory.store                   category=context importance=0.5
2025-12-04 11:38:14 [info     ] memory.stored                  category=context memory_id=b1d00b62-f2c3-47e4-b2d7-1e9f59925b8a
2025-12-04 11:38:14 [info     ] memory.store                   category=error importance=0.5
2025-12-04 11:38:14 [info     ] memory.stored                  category=error memory_id=264ae069-0afe-4f69-9045-02e8c5ea86f8
2025-12-04 11:38:14 [info     ] memory.store                   category=decision importance=0.5
2025-12-04 11:38:14 [info     ] memory.stored                  category=decision memory_id=3cec8e9a-2388-4ae3-a711-05299c508433
PASSED

============================== 42 passed in 0.06s ==============================
