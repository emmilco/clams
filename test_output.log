============================= test session starts ==============================
platform darwin -- Python 3.13.6, pytest-8.4.2, pluggy-1.6.0 -- /Users/elliotmilco/.pyenv/versions/3.13.6/bin/python3.13
cachedir: .pytest_cache
rootdir: /Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06
configfile: pyproject.toml
plugins: asyncio-1.2.0, xdist-3.8.0, timeout-2.4.0, anyio-4.10.0, cov-7.0.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 24 items

tests/indexers/test_indexer.py::test_index_single_file 2025-12-04 11:41:11 [info     ] collection_created             name=code_units
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.py project=test_project
PASSED
tests/indexers/test_indexer.py::test_index_file_twice_skips_second 2025-12-04 11:41:11 [info     ] collection_created             name=code_units
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.py project=test_project
2025-12-04 11:41:11 [info     ] file_skipped                   path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.py reason=no_changes
PASSED
tests/indexers/test_indexer.py::test_index_directory 2025-12-04 11:41:11 [info     ] collection_created             name=code_units
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/malformed.py project=test_project
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.swift project=test_project
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.ts project=test_project
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.java project=test_project
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.cpp project=test_project
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.c project=test_project
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.py project=test_project
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.rs project=test_project
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.js project=test_project
PASSED
tests/indexers/test_indexer.py::test_remove_file 2025-12-04 11:41:11 [info     ] collection_created             name=code_units
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.py project=test_project
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=7 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.py project=test_project
2025-12-04 11:41:11 [info     ] file_removed                   path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.py project=test_project units_removed=7
PASSED
tests/indexers/test_indexer.py::test_remove_project 2025-12-04 11:41:11 [info     ] collection_created             name=code_units
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.py project=test_project
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.ts project=test_project
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=7 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.py project=test_project
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=5 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.ts project=test_project
2025-12-04 11:41:11 [info     ] project_removed                files_count=2 project=test_project
PASSED
tests/indexers/test_indexer.py::test_reindex_prevents_orphans 2025-12-04 11:41:11 [info     ] collection_created             name=code_units
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/tmp6xm6cj5g.py project=test_project
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=3 path=/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/tmp6xm6cj5g.py project=test_project
PASSED
tests/indexers/test_indexer.py::test_empty_file_handling 2025-12-04 11:41:11 [info     ] collection_created             name=code_units
PASSED
tests/indexers/test_indexer.py::test_error_accumulation 2025-12-04 11:41:11 [info     ] collection_created             name=code_units
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/malformed.py project=test_project
PASSED
tests/indexers/test_indexer.py::test_exclude_patterns 2025-12-04 11:41:11 [info     ] collection_created             name=code_units
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.swift project=test_project
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.ts project=test_project
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.java project=test_project
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.cpp project=test_project
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.c project=test_project
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.py project=test_project
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.rs project=test_project
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.js project=test_project
PASSED
tests/indexers/test_indexer.py::test_get_indexing_stats 2025-12-04 11:41:11 [info     ] collection_created             name=code_units
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.py project=project1
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.ts project=project1
2025-12-04 11:41:11 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-06/tests/fixtures/code_samples/sample.js project=project2
PASSED
tests/indexers/test_tree_sitter.py::test_language_detection PASSED
tests/indexers/test_tree_sitter.py::test_supported_languages PASSED
tests/indexers/test_tree_sitter.py::test_parse_python PASSED
tests/indexers/test_tree_sitter.py::test_parse_typescript PASSED
tests/indexers/test_tree_sitter.py::test_parse_javascript PASSED
tests/indexers/test_tree_sitter.py::test_parse_lua SKIPPED (Lua parser
not available on PyPI)
tests/indexers/test_tree_sitter.py::test_parse_rust PASSED
tests/indexers/test_tree_sitter.py::test_parse_java PASSED
tests/indexers/test_tree_sitter.py::test_parse_c PASSED
tests/indexers/test_tree_sitter.py::test_parse_cpp PASSED
tests/indexers/test_tree_sitter.py::test_parse_swift PASSED
tests/indexers/test_tree_sitter.py::test_parse_sql SKIPPED (SQL parsing
is complex and not MVP critical)
tests/indexers/test_tree_sitter.py::test_parse_empty_file PASSED
tests/indexers/test_tree_sitter.py::test_parse_malformed_file PASSED

======================== 22 passed, 2 skipped in 3.52s =========================
