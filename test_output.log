============================= test session starts ==============================
platform darwin -- Python 3.12.12, pytest-9.0.1, pluggy-1.6.0 -- /Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/.venv/bin/python
cachedir: .pytest_cache
hypothesis profile 'default'
rootdir: /Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16
configfile: pyproject.toml
testpaths: tests
plugins: mock-3.15.1, hypothesis-6.148.6, anyio-4.12.0, asyncio-1.3.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 470 items

tests/clustering/test_clusterer.py::test_cluster_basic PASSED
tests/clustering/test_clusterer.py::test_cluster_with_weights PASSED
tests/clustering/test_clusterer.py::test_cluster_empty PASSED
tests/clustering/test_clusterer.py::test_cluster_wrong_shape PASSED
tests/clustering/test_clusterer.py::test_cluster_weights_mismatch PASSED
tests/clustering/test_clusterer.py::test_cluster_single_cluster PASSED
tests/clustering/test_clusterer.py::test_compute_centroids PASSED
tests/clustering/test_clusterer.py::test_compute_centroids_excludes_noise PASSED
tests/clustering/test_clusterer.py::test_compute_centroids_weighted PASSED
tests/clustering/test_clusterer.py::test_compute_centroids_array_mismatch PASSED
tests/clustering/test_clusterer.py::test_compute_centroids_weights_mismatch PASSED
tests/clustering/test_clusterer.py::test_compute_centroids_no_weights PASSED
tests/clustering/test_clusterer.py::test_cluster_invariants PASSED
tests/clustering/test_clusterer.py::test_centroid_invariants PASSED
tests/clustering/test_clusterer.py::test_cluster_result_types PASSED
tests/clustering/test_clusterer.py::test_cluster_info_types PASSED
tests/clustering/test_experience.py::test_cluster_axis_success 2025-12-04 23:04:45 [info     ] clustering.complete            axis=full n_clusters=2 noise_count=10 total_points=20
PASSED
tests/clustering/test_experience.py::test_cluster_axis_invalid PASSED
tests/clustering/test_experience.py::test_cluster_axis_no_data PASSED
tests/clustering/test_experience.py::test_cluster_axis_with_weights 2025-12-04 23:04:45 [info     ] clustering.complete            axis=strategy n_clusters=2 noise_count=10 total_points=20
PASSED
tests/clustering/test_experience.py::test_cluster_axis_missing_tier 2025-12-04 23:04:45 [info     ] clustering.complete            axis=full n_clusters=2 noise_count=10 total_points=20
PASSED
tests/clustering/test_experience.py::test_cluster_axis_all_noise 2025-12-04 23:04:45 [warning  ] clustering.all_noise           axis=full message='HDBSCAN labeled all points as noise - no clusters found' noise_count=5 total_points=5
PASSED
tests/clustering/test_experience.py::test_cluster_all_axes 2025-12-04 23:04:45 [warning  ] clustering.all_noise           axis=full message='HDBSCAN labeled all points as noise - no clusters found' noise_count=10 total_points=10
2025-12-04 23:04:45 [warning  ] clustering.all_noise           axis=strategy message='HDBSCAN labeled all points as noise - no clusters found' noise_count=15 total_points=15
2025-12-04 23:04:45 [warning  ] clustering.axis_skipped        axis=surprise error="No embeddings found for axis 'surprise' (collection: experiences_surprise)" message='Skipping axis due to error'
2025-12-04 23:04:45 [warning  ] clustering.axis_skipped        axis=root_cause error="No embeddings found for axis 'root_cause' (collection: experiences_root_cause)" message='Skipping axis due to error'
PASSED
tests/clustering/test_experience.py::test_cluster_all_axes_all_empty 2025-12-04 23:04:45 [warning  ] clustering.axis_skipped        axis=full error="No embeddings found for axis 'full' (collection: experiences_full)" message='Skipping axis due to error'
2025-12-04 23:04:45 [warning  ] clustering.axis_skipped        axis=strategy error="No embeddings found for axis 'strategy' (collection: experiences_strategy)" message='Skipping axis due to error'
2025-12-04 23:04:45 [warning  ] clustering.axis_skipped        axis=surprise error="No embeddings found for axis 'surprise' (collection: experiences_surprise)" message='Skipping axis due to error'
2025-12-04 23:04:45 [warning  ] clustering.axis_skipped        axis=root_cause error="No embeddings found for axis 'root_cause' (collection: experiences_root_cause)" message='Skipping axis due to error'
PASSED
tests/clustering/test_experience.py::test_cluster_axis_calls_correct_collection 2025-12-04 23:04:45 [info     ] clustering.complete            axis=full n_clusters=2 noise_count=10 total_points=20
2025-12-04 23:04:45 [info     ] clustering.complete            axis=strategy n_clusters=2 noise_count=10 total_points=20
2025-12-04 23:04:45 [info     ] clustering.complete            axis=surprise n_clusters=2 noise_count=10 total_points=20
2025-12-04 23:04:45 [info     ] clustering.complete            axis=root_cause n_clusters=2 noise_count=10 total_points=20
PASSED
tests/clustering/test_experience.py::test_cluster_axis_scroll_limit_warning 2025-12-04 23:04:45 [warning  ] clustering.scroll_limit_reached axis=full collection=experiences_full count=10000 message='May have truncated results - consider pagination'
2025-12-04 23:04:54 [info     ] clustering.complete            axis=full n_clusters=358 noise_count=8166 total_points=10000
PASSED
tests/clustering/test_integration.py::test_end_to_end_clustering 2025-12-04 23:04:54 [warning  ] clustering.all_noise           axis=full message='HDBSCAN labeled all points as noise - no clusters found' noise_count=50 total_points=50
PASSED
tests/clustering/test_integration.py::test_multi_axis_clustering 2025-12-04 23:04:54 [warning  ] clustering.all_noise           axis=full message='HDBSCAN labeled all points as noise - no clusters found' noise_count=30 total_points=30
2025-12-04 23:04:54 [warning  ] clustering.all_noise           axis=strategy message='HDBSCAN labeled all points as noise - no clusters found' noise_count=30 total_points=30
PASSED
tests/clustering/test_integration.py::test_clustering_with_mixed_confidence_tiers 2025-12-04 23:04:54 [warning  ] clustering.all_noise           axis=full message='HDBSCAN labeled all points as noise - no clusters found' noise_count=16 total_points=16
PASSED
tests/clustering/test_integration.py::test_clustering_performance 2025-12-04 23:04:56 [info     ] clustering.complete            axis=full n_clusters=3 noise_count=318 total_points=500
PASSED
tests/clustering/test_integration.py::test_clustering_empty_collection PASSED
tests/clustering/test_types.py::test_confidence_weights_mapping PASSED
tests/clustering/test_types.py::test_get_weight_valid_tiers PASSED
tests/clustering/test_types.py::test_get_weight_case_insensitive PASSED
tests/clustering/test_types.py::test_get_weight_none PASSED
tests/clustering/test_types.py::test_get_weight_invalid PASSED
tests/context/test_assembler.py::test_assemble_single_source_memories 2025-12-04 23:04:56 [info     ] assembling_context             component=context_assembler context_types=['memories'] limit=20 max_tokens=1000 query='coding preferences'
2025-12-04 23:04:56 [info     ] deduplication_complete         component=context_assembler deduplicated_count=1 original_count=1
2025-12-04 23:04:56 [debug    ] source_budget_used             budget=1000 component=context_assembler items_selected=1 source=memories unused=983 used=17
2025-12-04 23:04:56 [debug    ] redistributing_unused_budget   component=context_assembler total_unused=983
PASSED
tests/context/test_assembler.py::test_assemble_multiple_sources 2025-12-04 23:04:56 [info     ] assembling_context             component=context_assembler context_types=['memories', 'code'] limit=20 max_tokens=2000 query='python examples'
2025-12-04 23:04:56 [info     ] deduplication_complete         component=context_assembler deduplicated_count=2 original_count=2
2025-12-04 23:04:56 [debug    ] source_budget_used             budget=666 component=context_assembler items_selected=1 source=memories unused=649 used=17
2025-12-04 23:04:56 [debug    ] source_budget_used             budget=1333 component=context_assembler items_selected=1 source=code unused=1308 used=25
2025-12-04 23:04:56 [debug    ] redistributing_unused_budget   component=context_assembler total_unused=1957
PASSED
tests/context/test_assembler.py::test_invalid_context_type PASSED
tests/context/test_assembler.py::test_empty_results 2025-12-04 23:04:56 [info     ] assembling_context             component=context_assembler context_types=['memories', 'code'] limit=20 max_tokens=1000 query=nothing
2025-12-04 23:04:56 [info     ] deduplication_complete         component=context_assembler deduplicated_count=0 original_count=0
PASSED
tests/context/test_assembler.py::test_token_budget_distribution 2025-12-04 23:04:56 [info     ] assembling_context             component=context_assembler context_types=['memories'] limit=20 max_tokens=500 query=test
2025-12-04 23:04:56 [info     ] deduplication_complete         component=context_assembler deduplicated_count=8 original_count=8
2025-12-04 23:04:56 [debug    ] source_budget_used             budget=500 component=context_assembler items_selected=8 source=memories unused=354 used=146
2025-12-04 23:04:56 [debug    ] redistributing_unused_budget   component=context_assembler total_unused=354
PASSED
tests/context/test_assembler.py::test_deduplication 2025-12-04 23:04:56 [info     ] assembling_context             component=context_assembler context_types=['experiences', 'values'] limit=20 max_tokens=2000 query=test
2025-12-04 23:04:56 [info     ] deduplication_complete         component=context_assembler deduplicated_count=1 original_count=2
2025-12-04 23:04:56 [debug    ] source_budget_used             budget=500 component=context_assembler items_selected=1 source=values unused=487 used=13
2025-12-04 23:04:56 [debug    ] redistributing_unused_budget   component=context_assembler total_unused=487
PASSED
tests/context/test_assembler.py::test_premortem_context 2025-12-04 23:04:56 [info     ] assembling_premortem           component=context_assembler domain=debugging limit=10 strategy=systematic
PASSED
tests/context/test_assembler.py::test_premortem_partial_failure 2025-12-04 23:04:56 [info     ] assembling_premortem           component=context_assembler domain=debugging limit=10 strategy=None
2025-12-04 23:04:56 [warning  ] premortem_query_partial_failure component=context_assembler error='Surprise axis failed' query_index=1
PASSED
tests/context/test_assembler.py::test_partial_source_failure 2025-12-04 23:04:56 [info     ] assembling_context             component=context_assembler context_types=['memories', 'code'] limit=20 max_tokens=2000 query=test
2025-12-04 23:04:56 [warning  ] source_query_partial_failure   component=context_assembler error='Code search failed' source=code
2025-12-04 23:04:56 [info     ] deduplication_complete         component=context_assembler deduplicated_count=1 original_count=1
2025-12-04 23:04:56 [debug    ] source_budget_used             budget=666 component=context_assembler items_selected=1 source=memories unused=652 used=14
2025-12-04 23:04:56 [debug    ] redistributing_unused_budget   component=context_assembler total_unused=652
PASSED
tests/context/test_deduplication.py::test_deduplicate_items_empty PASSED
tests/context/test_deduplication.py::test_deduplicate_items_no_duplicates PASSED
tests/context/test_deduplication.py::test_deduplicate_items_by_ghap_id PASSED
tests/context/test_deduplication.py::test_deduplicate_items_by_file_path PASSED
tests/context/test_deduplication.py::test_deduplicate_items_by_sha PASSED
tests/context/test_deduplication.py::test_deduplicate_items_by_memory_id PASSED
tests/context/test_deduplication.py::test_deduplicate_items_fuzzy_match PASSED
tests/context/test_deduplication.py::test_deduplicate_items_fuzzy_no_match PASSED
tests/context/test_deduplication.py::test_deduplicate_items_sorted_by_relevance PASSED
tests/context/test_deduplication.py::test_deduplicate_items_skips_long_content PASSED
tests/context/test_formatting.py::test_format_memory PASSED
tests/context/test_formatting.py::test_format_code PASSED
tests/context/test_formatting.py::test_format_code_no_docstring PASSED
tests/context/test_formatting.py::test_format_experience PASSED
tests/context/test_formatting.py::test_format_experience_no_optional_fields PASSED
tests/context/test_formatting.py::test_format_value PASSED
tests/context/test_formatting.py::test_format_commit PASSED
tests/context/test_formatting.py::test_format_commit_many_files PASSED
tests/context/test_formatting.py::test_assemble_markdown_standard PASSED
tests/context/test_formatting.py::test_assemble_markdown_empty_sources PASSED
tests/context/test_formatting.py::test_assemble_markdown_premortem PASSED
tests/context/test_formatting.py::test_assemble_markdown_premortem_no_strategy PASSED
tests/context/test_tokens.py::test_estimate_tokens_basic PASSED
tests/context/test_tokens.py::test_estimate_tokens_empty PASSED
tests/context/test_tokens.py::test_truncate_to_tokens_no_truncation PASSED
tests/context/test_tokens.py::test_truncate_to_tokens_truncates PASSED
tests/context/test_tokens.py::test_truncate_to_tokens_prefers_newline PASSED
tests/context/test_tokens.py::test_distribute_budget_single_source PASSED
tests/context/test_tokens.py::test_distribute_budget_multiple_sources PASSED
tests/context/test_tokens.py::test_distribute_budget_all_sources PASSED
tests/context/test_tokens.py::test_cap_item_tokens_no_cap PASSED
tests/context/test_tokens.py::test_cap_item_tokens_applies_cap PASSED
tests/context/test_tokens.py::test_cap_item_tokens_code_note PASSED
tests/context/test_tokens.py::test_cap_item_tokens_experience_note PASSED
tests/embedding/test_mock.py::TestMockEmbedding::test_dimension PASSED
tests/embedding/test_mock.py::TestMockEmbedding::test_embed_returns_correct_shape PASSED
tests/embedding/test_mock.py::TestMockEmbedding::test_embed_deterministic PASSED
tests/embedding/test_mock.py::TestMockEmbedding::test_embed_different_texts_produce_different_embeddings PASSED
tests/embedding/test_mock.py::TestMockEmbedding::test_embed_normalized PASSED
tests/embedding/test_mock.py::TestMockEmbedding::test_embed_batch_empty_list PASSED
tests/embedding/test_mock.py::TestMockEmbedding::test_embed_batch_single_item PASSED
tests/embedding/test_mock.py::TestMockEmbedding::test_embed_batch_multiple_items PASSED
tests/embedding/test_mock.py::TestMockEmbedding::test_embed_batch_consistency_with_embed PASSED
tests/embedding/test_mock.py::TestMockEmbedding::test_embed_handles_special_characters PASSED
tests/embedding/test_mock.py::TestMockEmbedding::test_embed_long_text PASSED
tests/embedding/test_nomic.py::TestNomicEmbedding::test_dimension PASSED
tests/embedding/test_nomic.py::TestNomicEmbedding::test_embed_returns_correct_shape PASSED
tests/embedding/test_nomic.py::TestNomicEmbedding::test_embed_multiple_calls PASSED
tests/embedding/test_nomic.py::TestNomicEmbedding::test_embed_batch_empty_list PASSED
tests/embedding/test_nomic.py::TestNomicEmbedding::test_embed_batch_single_item PASSED
tests/embedding/test_nomic.py::TestNomicEmbedding::test_embed_batch_multiple_items PASSED
tests/embedding/test_nomic.py::TestNomicEmbedding::test_custom_settings PASSED
tests/embedding/test_nomic.py::TestNomicEmbedding::test_invalid_model_raises_error PASSED
tests/git/test_analyzer.py::TestGitAnalyzer::test_index_commits_initial 2025-12-04 23:05:16 [info     ] full_index_starting            force=False has_state=False repo_path=/private/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/tmpj5knvzo7
PASSED
tests/git/test_analyzer.py::TestGitAnalyzer::test_index_commits_incremental 2025-12-04 23:05:16 [info     ] full_index_starting            force=False has_state=False repo_path=/private/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/tmpejzsekc1
2025-12-04 23:05:16 [info     ] incremental_index_starting     new_commits=1 repo_path=/private/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/tmpejzsekc1
PASSED
tests/git/test_analyzer.py::TestGitAnalyzer::test_index_commits_already_up_to_date 2025-12-04 23:05:17 [info     ] full_index_starting            force=False has_state=False repo_path=/private/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/tmpnprfwdsz
2025-12-04 23:05:17 [info     ] index_already_up_to_date       repo_path=/private/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/tmpnprfwdsz
PASSED
tests/git/test_analyzer.py::TestGitAnalyzer::test_index_commits_force_reindex 2025-12-04 23:05:17 [info     ] full_index_starting            force=False has_state=False repo_path=/private/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/tmpfwq1nq1u
2025-12-04 23:05:17 [info     ] full_index_starting            force=True has_state=True repo_path=/private/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/tmpfwq1nq1u
PASSED
tests/git/test_analyzer.py::TestGitAnalyzer::test_index_commits_with_limit 2025-12-04 23:05:17 [info     ] full_index_starting            force=False has_state=False repo_path=/private/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/tmp2ceydu13
PASSED
tests/git/test_analyzer.py::TestGitAnalyzer::test_index_commits_five_year_limit 2025-12-04 23:05:17 [info     ] full_index_starting            force=False has_state=False repo_path=/private/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/tmpo6pyb17l
PASSED
tests/git/test_analyzer.py::TestGitAnalyzer::test_search_commits 2025-12-04 23:05:18 [info     ] full_index_starting            force=False has_state=False repo_path=/private/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/tmp_mkr90ca
PASSED
tests/git/test_analyzer.py::TestGitAnalyzer::test_search_commits_with_author_filter 2025-12-04 23:05:18 [info     ] full_index_starting            force=False has_state=False repo_path=/private/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/tmpa8bl18zr
PASSED
tests/git/test_analyzer.py::TestGitAnalyzer::test_search_commits_with_date_filter 2025-12-04 23:05:18 [info     ] full_index_starting            force=False has_state=False repo_path=/private/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/tmpp65oopim
PASSED
tests/git/test_analyzer.py::TestGitAnalyzer::test_get_churn_hotspots PASSED
tests/git/test_analyzer.py::TestGitAnalyzer::test_get_file_authors PASSED
tests/git/test_analyzer.py::TestGitAnalyzer::test_get_change_frequency PASSED
tests/git/test_analyzer.py::TestGitAnalyzer::test_get_change_frequency_nonexistent_file PASSED
tests/git/test_analyzer.py::TestGitAnalyzer::test_blame_search PASSED
tests/git/test_analyzer.py::TestGitAnalyzer::test_blame_search_with_file_pattern PASSED
tests/git/test_analyzer.py::TestGitAnalyzer::test_embedding_text_format PASSED
tests/git/test_analyzer.py::TestGitAnalyzer::test_embedding_text_truncation PASSED
tests/git/test_analyzer.py::TestGitAnalyzer::test_index_state_tracking 2025-12-04 23:05:20 [info     ] full_index_starting            force=False has_state=False repo_path=/private/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/tmpgg50jqoy
PASSED
tests/git/test_analyzer.py::TestGitAnalyzer::test_batch_embedding_performance 2025-12-04 23:05:21 [info     ] full_index_starting            force=False has_state=False repo_path=/private/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/tmpfb8_0fre
PASSED
tests/git/test_analyzer.py::test_integration_with_real_repo 2025-12-04 23:05:21 [info     ] full_index_starting            force=False has_state=False repo_path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16
PASSED
tests/git/test_reader.py::TestGitPythonReader::test_init_with_valid_repo PASSED
tests/git/test_reader.py::TestGitPythonReader::test_init_with_invalid_repo PASSED
tests/git/test_reader.py::TestGitPythonReader::test_init_with_nonexistent_path PASSED
tests/git/test_reader.py::TestGitPythonReader::test_get_commits_empty_repo PASSED
tests/git/test_reader.py::TestGitPythonReader::test_get_commits_single_commit PASSED
tests/git/test_reader.py::TestGitPythonReader::test_get_commits_multiple_commits PASSED
tests/git/test_reader.py::TestGitPythonReader::test_get_commits_with_limit PASSED
tests/git/test_reader.py::TestGitPythonReader::test_get_commits_with_path_filter PASSED
tests/git/test_reader.py::TestGitPythonReader::test_get_commits_with_date_filter PASSED
tests/git/test_reader.py::TestGitPythonReader::test_get_blame_text_file PASSED
tests/git/test_reader.py::TestGitPythonReader::test_get_blame_nonexistent_file PASSED
tests/git/test_reader.py::TestGitPythonReader::test_get_blame_binary_file PASSED
tests/git/test_reader.py::TestGitPythonReader::test_get_file_history PASSED
tests/git/test_reader.py::TestGitPythonReader::test_get_head_sha PASSED
tests/git/test_reader.py::TestGitPythonReader::test_get_head_sha_empty_repo PASSED
tests/git/test_reader.py::TestGitPythonReader::test_commit_timezone_aware PASSED
tests/git/test_reader.py::TestGitPythonReader::test_blame_timezone_aware PASSED
tests/git/test_reader.py::TestGitPythonReader::test_files_changed_relative_paths PASSED
tests/git/test_reader.py::test_integration_with_real_repo PASSED
tests/hooks/test_mcp_client.py::TestMCPClient::test_init PASSED
tests/hooks/test_mcp_client.py::TestMCPClient::test_connect_success PASSED
tests/hooks/test_mcp_client.py::TestMCPClient::test_connect_timeout 2025-12-04 23:05:32 [warning  ] mcp_client.connect_failed      error='TestMCPClient.test_connect_timeout.<locals>.slow_connect() takes 0 positional arguments but 1 was given'
PASSED
tests/hooks/test_mcp_client.py::TestMCPClient::test_connect_exception 2025-12-04 23:05:32 [warning  ] mcp_client.connect_failed      error='Connection failed'
PASSED
tests/hooks/test_mcp_client.py::TestMCPClient::test_call_tool_not_connected 2025-12-04 23:05:32 [warning  ] mcp_client.not_connected
PASSED
tests/hooks/test_mcp_client.py::TestMCPClient::test_call_tool_success PASSED
tests/hooks/test_mcp_client.py::TestMCPClient::test_call_tool_empty_content PASSED
tests/hooks/test_mcp_client.py::TestMCPClient::test_call_tool_invalid_json 2025-12-04 23:05:32 [error    ] mcp_client.invalid_json        error='Expecting value: line 1 column 1 (char 0)' tool=test_tool
PASSED
tests/hooks/test_mcp_client.py::TestMCPClient::test_call_tool_timeout 2025-12-04 23:05:32 [warning  ] mcp_client.call_failed         error= tool=slow_tool
PASSED
tests/hooks/test_mcp_client.py::TestMCPClient::test_call_tool_exception 2025-12-04 23:05:32 [warning  ] mcp_client.call_failed         error='Tool call failed' tool=test_tool
PASSED
tests/hooks/test_mcp_client.py::TestMCPClient::test_close_with_session PASSED
tests/hooks/test_mcp_client.py::TestMCPClient::test_close_without_session PASSED
tests/hooks/test_mcp_client.py::TestMainCLI::test_main_invalid_args PASSED
tests/hooks/test_mcp_client.py::TestMainCLI::test_main_invalid_json_args PASSED
tests/hooks/test_mcp_client.py::TestMainCLI::test_main_connection_failed PASSED
tests/hooks/test_mcp_client.py::TestMainCLI::test_main_success PASSED
tests/indexers/test_indexer.py::test_index_single_file 2025-12-04 23:05:32 [info     ] collection_created             name=code_units
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.py project=test_project
PASSED
tests/indexers/test_indexer.py::test_index_file_twice_skips_second 2025-12-04 23:05:32 [info     ] collection_created             name=code_units
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.py project=test_project
2025-12-04 23:05:32 [info     ] file_skipped                   path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.py reason=no_changes
PASSED
tests/indexers/test_indexer.py::test_index_directory 2025-12-04 23:05:32 [info     ] collection_created             name=code_units
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/malformed.py project=test_project
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.swift project=test_project
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.ts project=test_project
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.java project=test_project
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.cpp project=test_project
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.c project=test_project
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.py project=test_project
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.rs project=test_project
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.js project=test_project
PASSED
tests/indexers/test_indexer.py::test_remove_file 2025-12-04 23:05:32 [info     ] collection_created             name=code_units
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.py project=test_project
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=7 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.py project=test_project
2025-12-04 23:05:32 [info     ] file_removed                   path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.py project=test_project units_removed=7
PASSED
tests/indexers/test_indexer.py::test_remove_project 2025-12-04 23:05:32 [info     ] collection_created             name=code_units
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.py project=test_project
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.ts project=test_project
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=7 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.py project=test_project
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=5 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.ts project=test_project
2025-12-04 23:05:32 [info     ] project_removed                files_count=2 project=test_project
PASSED
tests/indexers/test_indexer.py::test_reindex_prevents_orphans 2025-12-04 23:05:32 [info     ] collection_created             name=code_units
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/tmpwbkq7jcg.py project=test_project
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=3 path=/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/tmpwbkq7jcg.py project=test_project
PASSED
tests/indexers/test_indexer.py::test_empty_file_handling 2025-12-04 23:05:32 [info     ] collection_created             name=code_units
PASSED
tests/indexers/test_indexer.py::test_error_accumulation 2025-12-04 23:05:32 [info     ] collection_created             name=code_units
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/malformed.py project=test_project
PASSED
tests/indexers/test_indexer.py::test_exclude_patterns 2025-12-04 23:05:32 [info     ] collection_created             name=code_units
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.swift project=test_project
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.ts project=test_project
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.java project=test_project
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.cpp project=test_project
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.c project=test_project
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.py project=test_project
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.rs project=test_project
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.js project=test_project
PASSED
tests/indexers/test_indexer.py::test_get_indexing_stats 2025-12-04 23:05:32 [info     ] collection_created             name=code_units
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.py project=project1
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.ts project=project1
2025-12-04 23:05:32 [debug    ] file_units_deleted             count=0 path=/Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/tests/fixtures/code_samples/sample.js project=project2
PASSED
tests/indexers/test_tree_sitter.py::test_language_detection PASSED
tests/indexers/test_tree_sitter.py::test_supported_languages PASSED
tests/indexers/test_tree_sitter.py::test_parse_python PASSED
tests/indexers/test_tree_sitter.py::test_parse_typescript PASSED
tests/indexers/test_tree_sitter.py::test_parse_javascript PASSED
tests/indexers/test_tree_sitter.py::test_parse_lua SKIPPED (Lua parser
not available on PyPI)
tests/indexers/test_tree_sitter.py::test_parse_rust PASSED
tests/indexers/test_tree_sitter.py::test_parse_java PASSED
tests/indexers/test_tree_sitter.py::test_parse_c PASSED
tests/indexers/test_tree_sitter.py::test_parse_cpp PASSED
tests/indexers/test_tree_sitter.py::test_parse_swift PASSED
tests/indexers/test_tree_sitter.py::test_parse_sql SKIPPED (SQL parsing
is complex and not MVP critical)
tests/indexers/test_tree_sitter.py::test_parse_empty_file PASSED
tests/indexers/test_tree_sitter.py::test_parse_malformed_file PASSED
tests/observation/test_collector.py::test_create_ghap 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_b366e1
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_da255b
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_da255b strategy=systematic-elimination
PASSED
tests/observation/test_collector.py::test_create_ghap_auto_starts_session 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_abb90e
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_d21253
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_d21253 strategy=systematic-elimination
PASSED
tests/observation/test_collector.py::test_create_ghap_when_active_raises 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_e97ce3
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_133ddf
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_133ddf strategy=systematic-elimination
2025-12-04 23:05:32 [warning  ] ghap_already_active            current_id=ghap_20251205_040532_133ddf
PASSED
tests/observation/test_collector.py::test_update_ghap_changes_hypothesis 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_26cf13
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_b2f1e6
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_b2f1e6 strategy=systematic-elimination
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_b2f1e6
2025-12-04 23:05:32 [info     ] ghap_updated                   ghap_id=ghap_20251205_040532_b2f1e6 hap_changed=True iteration=2
PASSED
tests/observation/test_collector.py::test_update_ghap_changes_all_hap 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_144825
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_e988e1
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_e988e1 strategy=systematic-elimination
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_e988e1
2025-12-04 23:05:32 [info     ] ghap_updated                   ghap_id=ghap_20251205_040532_e988e1 hap_changed=True iteration=2
PASSED
tests/observation/test_collector.py::test_update_ghap_note_only 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_b682bb
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_c69fcb
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_c69fcb strategy=systematic-elimination
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_c69fcb
2025-12-04 23:05:32 [info     ] ghap_updated                   ghap_id=ghap_20251205_040532_c69fcb hap_changed=False iteration=1
PASSED
tests/observation/test_collector.py::test_update_ghap_strategy_only 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_b6604c
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_795e31
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_795e31 strategy=systematic-elimination
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_795e31
2025-12-04 23:05:32 [info     ] ghap_updated                   ghap_id=ghap_20251205_040532_795e31 hap_changed=False iteration=1
PASSED
tests/observation/test_collector.py::test_update_ghap_no_active_raises 2025-12-04 23:05:32 [warning  ] no_active_ghap_for_update
PASSED
tests/observation/test_collector.py::test_resolve_ghap_confirmed 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_edb99b
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_320052
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_320052 strategy=systematic-elimination
2025-12-04 23:05:32 [info     ] ghap_resolved                  ghap_id=ghap_20251205_040532_320052 iterations=1 status=confirmed tier=silver
PASSED
tests/observation/test_collector.py::test_resolve_ghap_auto_captured_gold 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_287591
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_e6345a
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_e6345a strategy=systematic-elimination
2025-12-04 23:05:32 [info     ] ghap_resolved                  ghap_id=ghap_20251205_040532_e6345a iterations=1 status=confirmed tier=gold
PASSED
tests/observation/test_collector.py::test_abandon_ghap 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_9ac1b5
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_c7a76a
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_c7a76a strategy=systematic-elimination
2025-12-04 23:05:32 [info     ] ghap_resolved                  ghap_id=ghap_20251205_040532_c7a76a iterations=1 status=abandoned tier=abandoned
PASSED
tests/observation/test_collector.py::test_start_session 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_486b73
PASSED
tests/observation/test_collector.py::test_start_session_archives_previous 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_604f4a
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_8652da
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_8652da strategy=systematic-elimination
2025-12-04 23:05:32 [info     ] ghap_resolved                  ghap_id=ghap_20251205_040532_8652da iterations=1 status=confirmed tier=silver
2025-12-04 23:05:32 [info     ] session_archived               archive_file=20251205_session_20251205_040532_604f4a.jsonl entry_count=1 session_id=session_20251205_040532_604f4a
2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_34d78b
PASSED
tests/observation/test_collector.py::test_end_session 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_39abc8
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_287aaf
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_287aaf strategy=systematic-elimination
2025-12-04 23:05:32 [info     ] ghap_resolved                  ghap_id=ghap_20251205_040532_287aaf iterations=1 status=confirmed tier=silver
2025-12-04 23:05:32 [info     ] session_archived               archive_file=20251205_session_20251205_040532_39abc8.jsonl entry_count=1 session_id=session_20251205_040532_39abc8
2025-12-04 23:05:32 [info     ] session_ended                  entries_archived=1 session_id=session_20251205_040532_39abc8
PASSED
tests/observation/test_collector.py::test_end_session_abandons_current 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_bd83e2
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_02b2bd
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_02b2bd strategy=systematic-elimination
2025-12-04 23:05:32 [info     ] ghap_resolved                  ghap_id=ghap_20251205_040532_02b2bd iterations=1 status=abandoned tier=abandoned
2025-12-04 23:05:32 [info     ] session_archived               archive_file=20251205_session_20251205_040532_bd83e2.jsonl entry_count=1 session_id=session_20251205_040532_bd83e2
2025-12-04 23:05:32 [info     ] session_ended                  entries_archived=1 session_id=session_20251205_040532_bd83e2
PASSED
tests/observation/test_collector.py::test_has_orphaned_entry 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_2e7149
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_d1154f
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_d1154f strategy=systematic-elimination
2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_b9d2c5
PASSED
tests/observation/test_collector.py::test_adopt_orphan 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_56be4a
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_1c6f56
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_1c6f56 strategy=systematic-elimination
2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_a6cdfa
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_1c6f56
2025-12-04 23:05:32 [info     ] orphan_adopted                 ghap_id=ghap_20251205_040532_1c6f56 new_session_id=session_20251205_040532_a6cdfa
PASSED
tests/observation/test_collector.py::test_abandon_orphan 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_6f2070
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_b9b399
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_b9b399 strategy=systematic-elimination
2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_166803
2025-12-04 23:05:32 [info     ] entry_archived_to_session      archive_file=20251205_session_20251205_040532_6f2070.jsonl ghap_id=ghap_20251205_040532_b9b399 session_id=session_20251205_040532_6f2070
2025-12-04 23:05:32 [info     ] orphan_abandoned               ghap_id=ghap_20251205_040532_b9b399 original_session_id=session_20251205_040532_6f2070
PASSED
tests/observation/test_collector.py::test_increment_tool_count PASSED
tests/observation/test_collector.py::test_should_check_in 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_aca7d4
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_20774a
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_20774a strategy=systematic-elimination
PASSED
tests/observation/test_collector.py::test_reset_tool_count PASSED
tests/observation/test_collector.py::test_tool_count_persists PASSED
tests/observation/test_collector.py::test_full_session_lifecycle 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_c00f87
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_511bbb
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_511bbb strategy=systematic-elimination
2025-12-04 23:05:32 [info     ] ghap_resolved                  ghap_id=ghap_20251205_040532_511bbb iterations=1 status=confirmed tier=silver
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_77ac08
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_77ac08 strategy=systematic-elimination
2025-12-04 23:05:32 [info     ] ghap_resolved                  ghap_id=ghap_20251205_040532_77ac08 iterations=1 status=confirmed tier=silver
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_9f937e
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_9f937e strategy=systematic-elimination
2025-12-04 23:05:32 [info     ] ghap_resolved                  ghap_id=ghap_20251205_040532_9f937e iterations=1 status=confirmed tier=silver
2025-12-04 23:05:32 [info     ] session_archived               archive_file=20251205_session_20251205_040532_c00f87.jsonl entry_count=3 session_id=session_20251205_040532_c00f87
2025-12-04 23:05:32 [info     ] session_ended                  entries_archived=3 session_id=session_20251205_040532_c00f87
PASSED
tests/observation/test_collector.py::test_state_survives_restart 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_b78c55
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_06eee1
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_06eee1 strategy=systematic-elimination
PASSED
tests/observation/test_collector.py::test_multiple_iterations 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_021d53
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_31add9
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_31add9 strategy=systematic-elimination
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_31add9
2025-12-04 23:05:32 [info     ] ghap_updated                   ghap_id=ghap_20251205_040532_31add9 hap_changed=True iteration=2
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_31add9
2025-12-04 23:05:32 [info     ] ghap_updated                   ghap_id=ghap_20251205_040532_31add9 hap_changed=True iteration=3
PASSED
tests/observation/test_collector.py::test_text_truncation 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_cca125
2025-12-04 23:05:32 [warning  ] text_truncated                 max_len=10000 original_len=15000
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_3abab0
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_3abab0 strategy=systematic-elimination
PASSED
tests/observation/test_collector.py::test_corrupted_current_ghap_recovery 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_9a1cf6
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_969db8
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_969db8 strategy=systematic-elimination
2025-12-04 23:05:32 [error    ] corrupted_ghap_backed_up       backup=/private/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/pytest-of-elliotmilco/pytest-599/test_corrupted_current_ghap_re0/journal/current_ghap.corrupted.1764907532 error='Expecting value: line 1 column 1 (char 0)' file=/private/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/pytest-of-elliotmilco/pytest-599/test_corrupted_current_ghap_re0/journal/current_ghap.json
PASSED
tests/observation/test_collector.py::test_corrupted_session_entries_recovery 2025-12-04 23:05:32 [info     ] session_started                session_id=session_20251205_040532_0e7f61
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_1f108b
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_1f108b strategy=systematic-elimination
2025-12-04 23:05:32 [info     ] ghap_resolved                  ghap_id=ghap_20251205_040532_1f108b iterations=1 status=confirmed tier=silver
2025-12-04 23:05:32 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040532_2b3b5a
2025-12-04 23:05:32 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040532_2b3b5a strategy=systematic-elimination
2025-12-04 23:05:32 [info     ] ghap_resolved                  ghap_id=ghap_20251205_040532_2b3b5a iterations=1 status=confirmed tier=silver
2025-12-04 23:05:32 [warning  ] corrupt_entry_skipped          error='Expecting value: line 1 column 1 (char 0)' line_num=2
PASSED
tests/observation/test_models.py::test_root_cause_serialization PASSED
tests/observation/test_models.py::test_lesson_serialization PASSED
tests/observation/test_models.py::test_lesson_optional_takeaway PASSED
tests/observation/test_models.py::test_history_entry_serialization PASSED
tests/observation/test_models.py::test_outcome_serialization PASSED
tests/observation/test_models.py::test_ghap_entry_minimal_serialization PASSED
tests/observation/test_models.py::test_ghap_entry_full_serialization PASSED
tests/observation/test_models.py::test_domain_enum_values PASSED
tests/observation/test_models.py::test_strategy_enum_values PASSED
tests/observation/test_models.py::test_outcome_status_enum_values PASSED
tests/observation/test_models.py::test_confidence_tier_enum_values PASSED
tests/observation/test_utils.py::test_generate_ghap_id PASSED
tests/observation/test_utils.py::test_generate_ghap_id_uniqueness PASSED
tests/observation/test_utils.py::test_generate_session_id PASSED
tests/observation/test_utils.py::test_generate_session_id_uniqueness PASSED
tests/observation/test_utils.py::test_compute_confidence_tier_abandoned PASSED
tests/observation/test_utils.py::test_compute_confidence_tier_gold PASSED
tests/observation/test_utils.py::test_compute_confidence_tier_silver PASSED
tests/observation/test_utils.py::test_compute_confidence_tier_no_outcome PASSED
tests/observation/test_utils.py::test_atomic_write PASSED
tests/observation/test_utils.py::test_atomic_write_overwrites_existing PASSED
tests/observation/test_utils.py::test_atomic_write_cleans_up_temp_on_error PASSED
tests/observation/test_utils.py::test_truncate_text_short PASSED
tests/observation/test_utils.py::test_truncate_text_exact_limit PASSED
tests/observation/test_utils.py::test_truncate_text_too_long 2025-12-04 23:05:32 [warning  ] text_truncated                 max_len=100 original_len=200
PASSED
tests/observation/test_utils.py::test_truncate_text_unicode 2025-12-04 23:05:32 [warning  ] text_truncated                 max_len=50 original_len=1000
PASSED
tests/search/test_results.py::TestMemoryResult::test_from_search_result_with_all_fields PASSED
tests/search/test_results.py::TestMemoryResult::test_from_search_result_with_optional_fields_none PASSED
tests/search/test_results.py::TestCodeResult::test_from_search_result_with_all_fields PASSED
tests/search/test_results.py::TestCodeResult::test_from_search_result_without_docstring PASSED
tests/search/test_results.py::TestExperienceResult::test_from_search_result_with_all_fields PASSED
tests/search/test_results.py::TestExperienceResult::test_from_search_result_without_optional_nested_objects PASSED
tests/search/test_results.py::TestValueResult::test_from_search_result PASSED
tests/search/test_results.py::TestCommitResult::test_from_search_result PASSED
tests/search/test_searcher.py::TestSearchMemories::test_calls_embed_with_query PASSED
tests/search/test_searcher.py::TestSearchMemories::test_calls_vector_store_with_correct_collection PASSED
tests/search/test_searcher.py::TestSearchMemories::test_applies_category_filter PASSED
tests/search/test_searcher.py::TestSearchMemories::test_empty_query_returns_empty_list PASSED
tests/search/test_searcher.py::TestSearchMemories::test_invalid_search_mode_raises_error PASSED
tests/search/test_searcher.py::TestSearchMemories::test_embedding_failure_raises_embedding_error PASSED
tests/search/test_searcher.py::TestSearchMemories::test_collection_not_found_raises_error PASSED
tests/search/test_searcher.py::TestSearchMemories::test_maps_results_correctly PASSED
tests/search/test_searcher.py::TestSearchCode::test_calls_embed_with_query PASSED
tests/search/test_searcher.py::TestSearchCode::test_calls_vector_store_with_correct_collection PASSED
tests/search/test_searcher.py::TestSearchCode::test_applies_multiple_filters PASSED
tests/search/test_searcher.py::TestSearchCode::test_maps_results_correctly PASSED
tests/search/test_searcher.py::TestSearchExperiences::test_calls_embed_with_query PASSED
tests/search/test_searcher.py::TestSearchExperiences::test_selects_correct_collection_for_axis PASSED
tests/search/test_searcher.py::TestSearchExperiences::test_invalid_axis_raises_error PASSED
tests/search/test_searcher.py::TestSearchExperiences::test_applies_domain_and_outcome_filters PASSED
tests/search/test_searcher.py::TestSearchExperiences::test_maps_results_with_nested_dataclasses PASSED
tests/search/test_searcher.py::TestSearchValues::test_calls_embed_with_query PASSED
tests/search/test_searcher.py::TestSearchValues::test_calls_vector_store_with_correct_collection PASSED
tests/search/test_searcher.py::TestSearchValues::test_default_limit_is_5 PASSED
tests/search/test_searcher.py::TestSearchValues::test_maps_results_correctly PASSED
tests/search/test_searcher.py::TestSearchCommits::test_calls_embed_with_query PASSED
tests/search/test_searcher.py::TestSearchCommits::test_calls_vector_store_with_correct_collection PASSED
tests/search/test_searcher.py::TestSearchCommits::test_applies_author_and_date_filters PASSED
tests/search/test_searcher.py::TestSearchCommits::test_maps_results_correctly PASSED
tests/search/test_searcher.py::TestCollectionName::test_experience_axis_mapping PASSED
tests/search/test_searcher.py::TestCollectionName::test_invalid_axis_raises_error PASSED
tests/server/test_config.py::test_default_settings PASSED
tests/server/test_config.py::test_env_override PASSED
tests/server/test_config.py::test_settings_immutable PASSED
tests/server/test_main.py::test_create_server 2025-12-04 23:05:32 [info     ] services.initializing
2025-12-04 23:05:36 [info     ] code.initialized
2025-12-04 23:05:36 [info     ] git.init_skipped               reason=no_repo_path
2025-12-04 23:05:36 [info     ] services.initialized           has_code=True has_git=False has_searcher=False
2025-12-04 23:05:36 [info     ] tools.registered               has_code=True has_git=False has_searcher=False
2025-12-04 23:05:36 [info     ] server.created                 server_name=learning-memory-server
PASSED
tests/server/test_main.py::test_server_has_ping_tool 2025-12-04 23:05:36 [info     ] services.initializing
2025-12-04 23:05:38 [info     ] code.initialized
2025-12-04 23:05:38 [info     ] git.init_skipped               reason=no_repo_path
2025-12-04 23:05:38 [info     ] services.initialized           has_code=True has_git=False has_searcher=False
2025-12-04 23:05:38 [info     ] tools.registered               has_code=True has_git=False has_searcher=False
2025-12-04 23:05:38 [info     ] server.created                 server_name=learning-memory-server
PASSED
tests/server/tools/test_code.py::test_index_codebase_not_available 2025-12-04 23:05:38 [info     ] code.index                     directory=/tmp project=test
PASSED
tests/server/tools/test_code.py::test_search_code_not_available 2025-12-04 23:05:38 [info     ] code.search                    project=None query=test
PASSED
tests/server/tools/test_code.py::test_find_similar_code_not_available 2025-12-04 23:05:38 [info     ] code.find_similar              snippet_len=9
PASSED
tests/server/tools/test_code.py::test_search_code_empty_query 2025-12-04 23:05:38 [info     ] code.search                    project=None query='   '
PASSED
tests/server/tools/test_code.py::test_search_code_limit_validation 2025-12-04 23:05:38 [info     ] code.search                    project=None query=test
2025-12-04 23:05:38 [info     ] code.search                    project=None query=test
PASSED
tests/server/tools/test_code.py::test_find_similar_code_snippet_too_long 2025-12-04 23:05:38 [info     ] code.find_similar              snippet_len=6000
PASSED
tests/server/tools/test_code.py::test_find_similar_code_empty_snippet 2025-12-04 23:05:38 [info     ] code.find_similar              snippet_len=3
PASSED
tests/server/tools/test_code.py::test_find_similar_code_limit_validation 2025-12-04 23:05:38 [info     ] code.find_similar              snippet_len=4
2025-12-04 23:05:38 [info     ] code.find_similar              snippet_len=4
PASSED
tests/server/tools/test_code.py::test_index_codebase_directory_not_found 2025-12-04 23:05:38 [info     ] code.index                     directory=/private/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/pytest-of-elliotmilco/pytest-599/test_index_codebase_directory_0/nonexistent project=test
PASSED
tests/server/tools/test_code.py::test_index_codebase_not_a_directory 2025-12-04 23:05:38 [info     ] code.index                     directory=/private/var/folders/kw/rp67pf8d5ng588lqp7d_gb240000gn/T/pytest-of-elliotmilco/pytest-599/test_index_codebase_not_a_dire0/test.txt project=test
PASSED
tests/server/tools/test_code.py::test_search_code_with_filters 2025-12-04 23:05:38 [info     ] code.search                    project=test-project query='test function'
2025-12-04 23:05:38 [info     ] code.searched                  count=1
PASSED
tests/server/tools/test_code.py::test_find_similar_code_with_project_filter 2025-12-04 23:05:38 [info     ] code.find_similar              snippet_len=16
2025-12-04 23:05:38 [info     ] code.similar_found             count=0
PASSED
tests/server/tools/test_enums.py::TestDomains::test_valid_domains PASSED
tests/server/tools/test_enums.py::TestDomains::test_invalid_domain_raises_error PASSED
tests/server/tools/test_enums.py::TestDomains::test_error_message_includes_valid_options PASSED
tests/server/tools/test_enums.py::TestStrategies::test_valid_strategies PASSED
tests/server/tools/test_enums.py::TestStrategies::test_invalid_strategy_raises_error PASSED
tests/server/tools/test_enums.py::TestStrategies::test_error_message_includes_valid_options PASSED
tests/server/tools/test_enums.py::TestAxes::test_valid_axes PASSED
tests/server/tools/test_enums.py::TestAxes::test_invalid_axis_raises_error PASSED
tests/server/tools/test_enums.py::TestAxes::test_error_message_includes_valid_options PASSED
tests/server/tools/test_enums.py::TestAxes::test_domain_is_not_a_valid_axis PASSED
tests/server/tools/test_enums.py::TestOutcomeStatus::test_valid_outcome_statuses PASSED
tests/server/tools/test_enums.py::TestOutcomeStatus::test_invalid_outcome_status_raises_error PASSED
tests/server/tools/test_enums.py::TestOutcomeStatus::test_error_message_includes_valid_options PASSED
tests/server/tools/test_enums.py::TestRootCauseCategories::test_valid_root_cause_categories PASSED
tests/server/tools/test_enums.py::TestRootCauseCategories::test_invalid_root_cause_category_raises_error PASSED
tests/server/tools/test_enums.py::TestRootCauseCategories::test_error_message_includes_valid_options PASSED
tests/server/tools/test_errors.py::test_mcp_error_is_exception PASSED
tests/server/tools/test_errors.py::test_validation_error_is_mcp_error PASSED
tests/server/tools/test_errors.py::test_not_found_error_is_mcp_error PASSED
tests/server/tools/test_errors.py::test_insufficient_data_error_is_mcp_error PASSED
tests/server/tools/test_errors.py::test_errors_can_be_raised PASSED
tests/server/tools/test_ghap.py::TestStartGhap::test_start_ghap_success 2025-12-04 23:05:38 [info     ] session_started                session_id=session_20251205_040538_b5b27d
2025-12-04 23:05:38 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040538_f58c5e
2025-12-04 23:05:38 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040538_f58c5e strategy=systematic-elimination
2025-12-04 23:05:38 [info     ] ghap.started                   domain=debugging ghap_id=ghap_20251205_040538_f58c5e strategy=systematic-elimination
PASSED
tests/server/tools/test_ghap.py::TestStartGhap::test_start_ghap_invalid_domain 2025-12-04 23:05:38 [warning  ] ghap.validation_error          error="Invalid domain 'invalid'. Valid options: debugging, refactoring, feature, testing, configuration, documentation, performance, security, integration"
PASSED
tests/server/tools/test_ghap.py::TestStartGhap::test_start_ghap_invalid_strategy 2025-12-04 23:05:38 [warning  ] ghap.validation_error          error="Invalid strategy 'invalid'. Valid options: systematic-elimination, trial-and-error, research-first, divide-and-conquer, root-cause-analysis, copy-from-similar, check-assumptions, read-the-error, ask-user"
PASSED
tests/server/tools/test_ghap.py::TestStartGhap::test_start_ghap_empty_field 2025-12-04 23:05:38 [warning  ] ghap.validation_error          error="Field 'goal' cannot be empty"
PASSED
tests/server/tools/test_ghap.py::TestStartGhap::test_start_ghap_field_too_long 2025-12-04 23:05:38 [warning  ] ghap.validation_error          error="Field 'goal' exceeds 1000 character limit (1001 chars)"
PASSED
tests/server/tools/test_ghap.py::TestUpdateGhap::test_update_ghap_success 2025-12-04 23:05:38 [info     ] session_started                session_id=session_20251205_040538_03e5b0
2025-12-04 23:05:38 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040538_61e501
2025-12-04 23:05:38 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040538_61e501 strategy=systematic-elimination
2025-12-04 23:05:38 [info     ] ghap.started                   domain=debugging ghap_id=ghap_20251205_040538_61e501 strategy=systematic-elimination
2025-12-04 23:05:38 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040538_61e501
2025-12-04 23:05:38 [info     ] ghap_updated                   ghap_id=ghap_20251205_040538_61e501 hap_changed=True iteration=2
2025-12-04 23:05:38 [info     ] ghap.updated                   ghap_id=ghap_20251205_040538_61e501 iteration_count=2
PASSED
tests/server/tools/test_ghap.py::TestUpdateGhap::test_update_ghap_no_active_entry 2025-12-04 23:05:38 [warning  ] ghap.error                     error='No active GHAP entry to update. Use start_ghap to begin tracking.'
PASSED
tests/server/tools/test_ghap.py::TestUpdateGhap::test_update_ghap_field_too_long 2025-12-04 23:05:38 [info     ] session_started                session_id=session_20251205_040538_fc7c3f
2025-12-04 23:05:38 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040538_9a8aba
2025-12-04 23:05:38 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040538_9a8aba strategy=systematic-elimination
2025-12-04 23:05:38 [info     ] ghap.started                   domain=debugging ghap_id=ghap_20251205_040538_9a8aba strategy=systematic-elimination
2025-12-04 23:05:38 [warning  ] ghap.error                     error="Field 'hypothesis' exceeds 1000 character limit (1001 chars)"
PASSED
tests/server/tools/test_ghap.py::TestResolveGhap::test_resolve_ghap_confirmed 2025-12-04 23:05:38 [info     ] session_started                session_id=session_20251205_040538_a02a69
2025-12-04 23:05:38 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040538_3eb405
2025-12-04 23:05:38 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040538_3eb405 strategy=systematic-elimination
2025-12-04 23:05:38 [info     ] ghap.started                   domain=debugging ghap_id=ghap_20251205_040538_3eb405 strategy=systematic-elimination
2025-12-04 23:05:38 [info     ] ghap_resolved                  ghap_id=ghap_20251205_040538_3eb405 iterations=1 status=confirmed tier=silver
2025-12-04 23:05:38 [info     ] ghap.persisted                 attempt=1 ghap_id=ghap_20251205_040538_3eb405
PASSED
tests/server/tools/test_ghap.py::TestResolveGhap::test_resolve_ghap_falsified 2025-12-04 23:05:38 [info     ] session_started                session_id=session_20251205_040538_278d79
2025-12-04 23:05:38 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040538_1a2498
2025-12-04 23:05:38 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040538_1a2498 strategy=systematic-elimination
2025-12-04 23:05:38 [info     ] ghap.started                   domain=debugging ghap_id=ghap_20251205_040538_1a2498 strategy=systematic-elimination
2025-12-04 23:05:38 [info     ] ghap_resolved                  ghap_id=ghap_20251205_040538_1a2498 iterations=1 status=falsified tier=silver
2025-12-04 23:05:38 [info     ] ghap.persisted                 attempt=1 ghap_id=ghap_20251205_040538_1a2498
PASSED
tests/server/tools/test_ghap.py::TestResolveGhap::test_resolve_ghap_falsified_missing_surprise 2025-12-04 23:05:38 [info     ] session_started                session_id=session_20251205_040538_190c58
2025-12-04 23:05:38 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040538_d442e5
2025-12-04 23:05:38 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040538_d442e5 strategy=systematic-elimination
2025-12-04 23:05:38 [info     ] ghap.started                   domain=debugging ghap_id=ghap_20251205_040538_d442e5 strategy=systematic-elimination
2025-12-04 23:05:38 [warning  ] ghap.error                     error="Field 'surprise' is required when status is 'falsified'"
PASSED
tests/server/tools/test_ghap.py::TestResolveGhap::test_resolve_ghap_invalid_status 2025-12-04 23:05:38 [info     ] session_started                session_id=session_20251205_040538_bd2c06
2025-12-04 23:05:38 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040538_adb06f
2025-12-04 23:05:38 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040538_adb06f strategy=systematic-elimination
2025-12-04 23:05:38 [info     ] ghap.started                   domain=debugging ghap_id=ghap_20251205_040538_adb06f strategy=systematic-elimination
2025-12-04 23:05:38 [warning  ] ghap.error                     error="Invalid outcome status 'invalid'. Valid options: confirmed, falsified, abandoned"
PASSED
tests/server/tools/test_ghap.py::TestGetActiveGhap::test_get_active_ghap_with_entry 2025-12-04 23:05:38 [info     ] session_started                session_id=session_20251205_040538_0d80a2
2025-12-04 23:05:38 [debug    ] ghap_saved                     ghap_id=ghap_20251205_040538_4c22f6
2025-12-04 23:05:38 [info     ] ghap_created                   domain=debugging ghap_id=ghap_20251205_040538_4c22f6 strategy=systematic-elimination
2025-12-04 23:05:38 [info     ] ghap.started                   domain=debugging ghap_id=ghap_20251205_040538_4c22f6 strategy=systematic-elimination
PASSED
tests/server/tools/test_ghap.py::TestGetActiveGhap::test_get_active_ghap_no_entry PASSED
tests/server/tools/test_ghap.py::TestListGhapEntries::test_list_ghap_entries_default 2025-12-04 23:05:38 [info     ] ghap.entries_listed            count=0 filters={}
PASSED
tests/server/tools/test_ghap.py::TestListGhapEntries::test_list_ghap_entries_invalid_limit 2025-12-04 23:05:38 [warning  ] ghap.validation_error          error='Limit must be between 1 and 100 (got 0)'
PASSED
tests/server/tools/test_ghap.py::TestListGhapEntries::test_list_ghap_entries_invalid_domain 2025-12-04 23:05:38 [warning  ] ghap.validation_error          error="Invalid domain 'invalid'. Valid options: debugging, refactoring, feature, testing, configuration, documentation, performance, security, integration"
PASSED
tests/server/tools/test_ghap.py::TestListGhapEntries::test_list_ghap_entries_invalid_date 2025-12-04 23:05:38 [warning  ] ghap.validation_error          error="Invalid date format for 'since': not a date. Expected ISO 8601 format (e.g., '2024-01-15T10:30:45+00:00')"
PASSED
tests/server/tools/test_git.py::test_search_commits_not_available 2025-12-04 23:05:38 [info     ] git.search_commits             author=None query=test
PASSED
tests/server/tools/test_git.py::test_get_file_history_not_available 2025-12-04 23:05:38 [info     ] git.file_history               limit=100 path=test.py
PASSED
tests/server/tools/test_git.py::test_get_churn_hotspots_not_available 2025-12-04 23:05:38 [info     ] git.churn_hotspots             days=90 limit=10
PASSED
tests/server/tools/test_git.py::test_get_code_authors_not_available 2025-12-04 23:05:38 [info     ] git.code_authors               path=test.py
PASSED
tests/server/tools/test_git.py::test_search_commits_empty_query 2025-12-04 23:05:38 [info     ] git.search_commits             author=None query='   '
PASSED
tests/server/tools/test_git.py::test_search_commits_limit_validation 2025-12-04 23:05:38 [info     ] git.search_commits             author=None query=test
2025-12-04 23:05:38 [info     ] git.search_commits             author=None query=test
PASSED
tests/server/tools/test_git.py::test_search_commits_invalid_date_format 2025-12-04 23:05:38 [info     ] git.search_commits             author=None query=test
PASSED
tests/server/tools/test_git.py::test_get_file_history_limit_validation 2025-12-04 23:05:38 [info     ] git.file_history               limit=0 path=test.py
2025-12-04 23:05:38 [info     ] git.file_history               limit=501 path=test.py
PASSED
tests/server/tools/test_git.py::test_get_file_history_file_not_found 2025-12-04 23:05:38 [info     ] git.file_history               limit=100 path=nonexistent.py
PASSED
tests/server/tools/test_git.py::test_get_churn_hotspots_days_validation 2025-12-04 23:05:38 [info     ] git.churn_hotspots             days=0 limit=10
2025-12-04 23:05:38 [info     ] git.churn_hotspots             days=366 limit=10
PASSED
tests/server/tools/test_git.py::test_get_churn_hotspots_limit_validation 2025-12-04 23:05:38 [info     ] git.churn_hotspots             days=90 limit=0
2025-12-04 23:05:38 [info     ] git.churn_hotspots             days=90 limit=51
PASSED
tests/server/tools/test_git.py::test_get_code_authors_file_not_found 2025-12-04 23:05:38 [info     ] git.code_authors               path=nonexistent.py
PASSED
tests/server/tools/test_learning.py::TestGetClusters::test_get_clusters_success 2025-12-04 23:05:38 [info     ] learning.clusters_retrieved    axis=full count=2 noise_count=7
PASSED
tests/server/tools/test_learning.py::TestGetClusters::test_get_clusters_invalid_axis 2025-12-04 23:05:38 [warning  ] learning.error                 error="Invalid axis 'invalid'. Valid options: full, strategy, surprise, root_cause"
PASSED
tests/server/tools/test_learning.py::TestGetClusters::test_get_clusters_insufficient_data 2025-12-04 23:05:38 [warning  ] learning.error                 error='Not enough experiences for clustering. Found 15, need at least 20.'
PASSED
tests/server/tools/test_learning.py::TestGetClusterMembers::test_get_cluster_members_success 2025-12-04 23:05:38 [info     ] learning.cluster_members_retrieved axis=full cluster_id=full_0 count=0 label=0
PASSED
tests/server/tools/test_learning.py::TestGetClusterMembers::test_get_cluster_members_invalid_format 2025-12-04 23:05:38 [warning  ] learning.error                 error="Invalid cluster_id format: invalid. Expected format: 'axis_label' (e.g., 'full_0', 'strategy_2')"
PASSED
tests/server/tools/test_learning.py::TestGetClusterMembers::test_get_cluster_members_invalid_axis 2025-12-04 23:05:38 [warning  ] learning.error                 error="Invalid axis 'invalid'. Valid options: full, strategy, surprise, root_cause"
PASSED
tests/server/tools/test_learning.py::TestGetClusterMembers::test_get_cluster_members_invalid_limit 2025-12-04 23:05:38 [warning  ] learning.error                 error='Limit must be between 1 and 100 (got 0)'
PASSED
tests/server/tools/test_learning.py::TestValidateValue::test_validate_value_success 2025-12-04 23:05:38 [info     ] learning.value_validated       cluster_id=strategy_0 similarity=<MagicMock name='mock.similarity' id='4915220592'> valid=<MagicMock name='mock.valid' id='4915216752'>
PASSED
tests/server/tools/test_learning.py::TestValidateValue::test_validate_value_empty_text 2025-12-04 23:05:38 [warning  ] learning.error                 error="Field 'text' cannot be empty"
PASSED
tests/server/tools/test_learning.py::TestValidateValue::test_validate_value_text_too_long 2025-12-04 23:05:38 [warning  ] learning.error                 error="Field 'text' exceeds 500 character limit (501 chars)"
PASSED
tests/server/tools/test_learning.py::TestValidateValue::test_validate_value_invalid_cluster_id 2025-12-04 23:05:38 [warning  ] learning.error                 error="Invalid cluster_id format: invalid. Expected format: 'axis_label'"
PASSED
tests/server/tools/test_learning.py::TestStoreValue::test_store_value_success 2025-12-04 23:05:38 [info     ] learning.value_stored          axis=strategy cluster_id=strategy_0 value_id=value_123
PASSED
tests/server/tools/test_learning.py::TestStoreValue::test_store_value_empty_text 2025-12-04 23:05:38 [warning  ] learning.error                 error="Field 'text' cannot be empty"
PASSED
tests/server/tools/test_learning.py::TestStoreValue::test_store_value_invalid_axis 2025-12-04 23:05:38 [warning  ] learning.error                 error="Invalid axis 'invalid'. Valid options: full, strategy, surprise, root_cause"
PASSED
tests/server/tools/test_learning.py::TestListValues::test_list_values_default 2025-12-04 23:05:38 [info     ] learning.values_listed         axis=None count=0
PASSED
tests/server/tools/test_learning.py::TestListValues::test_list_values_with_axis_filter 2025-12-04 23:05:38 [info     ] learning.values_listed         axis=strategy count=0
PASSED
tests/server/tools/test_learning.py::TestListValues::test_list_values_invalid_axis 2025-12-04 23:05:38 [warning  ] learning.validation_error      error="Invalid axis 'invalid'. Valid options: full, strategy, surprise, root_cause"
PASSED
tests/server/tools/test_learning.py::TestListValues::test_list_values_invalid_limit 2025-12-04 23:05:38 [warning  ] learning.validation_error      error='Limit must be between 1 and 100 (got 101)'
PASSED
tests/server/tools/test_memory.py::test_store_memory_success 2025-12-04 23:05:38 [info     ] memory.store                   category=fact importance=0.8
2025-12-04 23:05:38 [info     ] memory.stored                  category=fact memory_id=dc74f802-dd33-43e1-a908-ba9dac358c29
PASSED
tests/server/tools/test_memory.py::test_store_memory_invalid_category 2025-12-04 23:05:38 [info     ] memory.store                   category=invalid importance=0.5
PASSED
tests/server/tools/test_memory.py::test_store_memory_content_too_long 2025-12-04 23:05:38 [info     ] memory.store                   category=fact importance=0.5
PASSED
tests/server/tools/test_memory.py::test_store_memory_importance_out_of_range 2025-12-04 23:05:38 [info     ] memory.store                   category=fact importance=1.5
2025-12-04 23:05:38 [info     ] memory.store                   category=fact importance=-0.1
PASSED
tests/server/tools/test_memory.py::test_store_memory_default_values 2025-12-04 23:05:38 [info     ] memory.store                   category=fact importance=0.5
2025-12-04 23:05:38 [info     ] memory.stored                  category=fact memory_id=ba46567c-781f-48e3-8a3b-34eb4aaff247
PASSED
tests/server/tools/test_memory.py::test_retrieve_memories_success 2025-12-04 23:05:38 [info     ] memory.retrieve                limit=10 query='test query'
2025-12-04 23:05:38 [info     ] memory.retrieved               count=1
PASSED
tests/server/tools/test_memory.py::test_retrieve_memories_empty_query 2025-12-04 23:05:38 [info     ] memory.retrieve                limit=10 query='   '
PASSED
tests/server/tools/test_memory.py::test_retrieve_memories_with_filters 2025-12-04 23:05:38 [info     ] memory.retrieve                limit=5 query=test
2025-12-04 23:05:38 [info     ] memory.retrieved               count=0
PASSED
tests/server/tools/test_memory.py::test_retrieve_memories_invalid_category 2025-12-04 23:05:38 [info     ] memory.retrieve                limit=10 query=test
PASSED
tests/server/tools/test_memory.py::test_retrieve_memories_limit_validation 2025-12-04 23:05:38 [info     ] memory.retrieve                limit=0 query=test
2025-12-04 23:05:38 [info     ] memory.retrieve                limit=101 query=test
PASSED
tests/server/tools/test_memory.py::test_list_memories_success 2025-12-04 23:05:38 [info     ] memory.list                    category=None limit=10 offset=0
2025-12-04 23:05:38 [info     ] memory.listed                  count=1 total=1
PASSED
tests/server/tools/test_memory.py::test_list_memories_pagination 2025-12-04 23:05:38 [info     ] memory.list                    category=None limit=2 offset=2
2025-12-04 23:05:38 [info     ] memory.listed                  count=2 total=5
PASSED
tests/server/tools/test_memory.py::test_list_memories_with_filters 2025-12-04 23:05:38 [info     ] memory.list                    category=fact limit=50 offset=0
2025-12-04 23:05:38 [info     ] memory.listed                  count=0 total=0
PASSED
tests/server/tools/test_memory.py::test_list_memories_invalid_offset 2025-12-04 23:05:38 [info     ] memory.list                    category=None limit=50 offset=-1
PASSED
tests/server/tools/test_memory.py::test_list_memories_limit_validation 2025-12-04 23:05:38 [info     ] memory.list                    category=None limit=0 offset=0
2025-12-04 23:05:38 [info     ] memory.list                    category=None limit=201 offset=0
PASSED
tests/server/tools/test_memory.py::test_delete_memory_success 2025-12-04 23:05:38 [info     ] memory.delete                  memory_id=test-id
2025-12-04 23:05:38 [info     ] memory.deleted                 memory_id=test-id
PASSED
tests/server/tools/test_memory.py::test_delete_memory_not_found 2025-12-04 23:05:38 [info     ] memory.delete                  memory_id=nonexistent
2025-12-04 23:05:38 [warning  ] memory.delete_failed           error='Not found' memory_id=nonexistent
PASSED
tests/server/tools/test_memory.py::test_all_valid_categories_accepted 2025-12-04 23:05:38 [info     ] memory.store                   category=preference importance=0.5
2025-12-04 23:05:38 [info     ] memory.stored                  category=preference memory_id=f4a1fcba-613b-4e52-a6cf-d7b5fb9b11d6
2025-12-04 23:05:38 [info     ] memory.store                   category=fact importance=0.5
2025-12-04 23:05:38 [info     ] memory.stored                  category=fact memory_id=65587c50-3f75-4dd2-99d1-df33830edacb
2025-12-04 23:05:38 [info     ] memory.store                   category=event importance=0.5
2025-12-04 23:05:38 [info     ] memory.stored                  category=event memory_id=286459f8-4fe7-4073-a7ef-035b6064de1d
2025-12-04 23:05:38 [info     ] memory.store                   category=workflow importance=0.5
2025-12-04 23:05:38 [info     ] memory.stored                  category=workflow memory_id=3a1005b7-08d8-4fe9-932c-a8add4a6d4b1
2025-12-04 23:05:38 [info     ] memory.store                   category=context importance=0.5
2025-12-04 23:05:38 [info     ] memory.stored                  category=context memory_id=c4f91635-2a1e-48ff-885d-d1c1734d676c
2025-12-04 23:05:38 [info     ] memory.store                   category=error importance=0.5
2025-12-04 23:05:38 [info     ] memory.stored                  category=error memory_id=3150f259-3146-4e09-87a7-89ab70a1c8f0
2025-12-04 23:05:38 [info     ] memory.store                   category=decision importance=0.5
2025-12-04 23:05:38 [info     ] memory.stored                  category=decision memory_id=ee0414eb-5978-4fb4-bea1-b33a60435221
PASSED
tests/server/tools/test_search.py::TestSearchExperiences::test_search_experiences_success 2025-12-04 23:05:38 [info     ] search.experiences_searched    axis=full count=0 query='How to debug async issues'
PASSED
tests/server/tools/test_search.py::TestSearchExperiences::test_search_experiences_empty_query PASSED
tests/server/tools/test_search.py::TestSearchExperiences::test_search_experiences_with_filters 2025-12-04 23:05:38 [info     ] search.experiences_searched    axis=full count=0 query='debugging patterns'
PASSED
tests/server/tools/test_search.py::TestSearchExperiences::test_search_experiences_invalid_axis 2025-12-04 23:05:38 [warning  ] search.validation_error        error="Invalid axis 'invalid'. Valid options: full, strategy, surprise, root_cause"
PASSED
tests/server/tools/test_search.py::TestSearchExperiences::test_search_experiences_invalid_domain 2025-12-04 23:05:38 [warning  ] search.validation_error        error="Invalid domain 'invalid'. Valid options: debugging, refactoring, feature, testing, configuration, documentation, performance, security, integration"
PASSED
tests/server/tools/test_search.py::TestSearchExperiences::test_search_experiences_invalid_outcome 2025-12-04 23:05:38 [warning  ] search.validation_error        error="Invalid outcome status 'invalid'. Valid options: confirmed, falsified, abandoned"
PASSED
tests/server/tools/test_search.py::TestSearchExperiences::test_search_experiences_invalid_limit 2025-12-04 23:05:38 [warning  ] search.validation_error        error='Limit must be between 1 and 50 (got 0)'
PASSED
tests/server/tools/test_search.py::TestSearchExperiences::test_search_experiences_limit_max 2025-12-04 23:05:38 [warning  ] search.validation_error        error='Limit must be between 1 and 50 (got 51)'
PASSED
tests/storage/test_memory.py::TestInMemoryVectorStore::test_create_collection PASSED
tests/storage/test_memory.py::TestInMemoryVectorStore::test_create_duplicate_collection PASSED
tests/storage/test_memory.py::TestInMemoryVectorStore::test_delete_collection PASSED
tests/storage/test_memory.py::TestInMemoryVectorStore::test_upsert_and_get PASSED
tests/storage/test_memory.py::TestInMemoryVectorStore::test_upsert_update PASSED
tests/storage/test_memory.py::TestInMemoryVectorStore::test_upsert_wrong_dimension PASSED
tests/storage/test_memory.py::TestInMemoryVectorStore::test_search_cosine_similarity PASSED
tests/storage/test_memory.py::TestInMemoryVectorStore::test_search_with_filters PASSED
tests/storage/test_memory.py::TestInMemoryVectorStore::test_delete PASSED
tests/storage/test_memory.py::TestInMemoryVectorStore::test_scroll PASSED
tests/storage/test_memory.py::TestInMemoryVectorStore::test_scroll_with_filters PASSED
tests/storage/test_memory.py::TestInMemoryVectorStore::test_count PASSED
tests/storage/test_memory.py::TestInMemoryVectorStore::test_count_with_filters PASSED
tests/storage/test_memory.py::TestInMemoryVectorStore::test_get_nonexistent PASSED
tests/storage/test_memory.py::TestInMemoryVectorStore::test_operations_on_nonexistent_collection PASSED
tests/storage/test_metadata.py::TestIndexedFiles::test_add_indexed_file PASSED
tests/storage/test_metadata.py::TestIndexedFiles::test_add_indexed_file_upsert PASSED
tests/storage/test_metadata.py::TestIndexedFiles::test_get_indexed_file PASSED
tests/storage/test_metadata.py::TestIndexedFiles::test_get_indexed_file_not_found PASSED
tests/storage/test_metadata.py::TestIndexedFiles::test_list_indexed_files PASSED
tests/storage/test_metadata.py::TestIndexedFiles::test_list_indexed_files_all_projects PASSED
tests/storage/test_metadata.py::TestIndexedFiles::test_get_stale_files PASSED
tests/storage/test_metadata.py::TestIndexedFiles::test_delete_indexed_file PASSED
tests/storage/test_metadata.py::TestCallGraph::test_add_call PASSED
tests/storage/test_metadata.py::TestCallGraph::test_add_call_upsert PASSED
tests/storage/test_metadata.py::TestCallGraph::test_get_callers PASSED
tests/storage/test_metadata.py::TestCallGraph::test_get_callees PASSED
tests/storage/test_metadata.py::TestCallGraph::test_delete_calls_for_file PASSED
tests/storage/test_metadata.py::TestProjects::test_add_project PASSED
tests/storage/test_metadata.py::TestProjects::test_add_project_default_settings PASSED
tests/storage/test_metadata.py::TestProjects::test_add_project_upsert PASSED
tests/storage/test_metadata.py::TestProjects::test_get_project PASSED
tests/storage/test_metadata.py::TestProjects::test_get_project_not_found PASSED
tests/storage/test_metadata.py::TestProjects::test_list_projects PASSED
tests/storage/test_metadata.py::TestProjects::test_update_project_last_indexed PASSED
tests/storage/test_metadata.py::TestProjects::test_delete_project PASSED
tests/storage/test_metadata.py::TestJSONSerialization::test_complex_settings_roundtrip PASSED
tests/storage/test_metadata.py::TestJSONSerialization::test_empty_settings_roundtrip PASSED
tests/storage/test_qdrant.py::TestQdrantVectorStore::test_create_collection PASSED
tests/storage/test_qdrant.py::TestQdrantVectorStore::test_delete_collection PASSED
tests/storage/test_qdrant.py::TestQdrantVectorStore::test_upsert_and_get PASSED
tests/storage/test_qdrant.py::TestQdrantVectorStore::test_upsert_update PASSED
tests/storage/test_qdrant.py::TestQdrantVectorStore::test_search_cosine_similarity PASSED
tests/storage/test_qdrant.py::TestQdrantVectorStore::test_search_with_filters PASSED
tests/storage/test_qdrant.py::TestQdrantVectorStore::test_delete PASSED
tests/storage/test_qdrant.py::TestQdrantVectorStore::test_scroll PASSED
tests/storage/test_qdrant.py::TestQdrantVectorStore::test_scroll_with_filters PASSED
tests/storage/test_qdrant.py::TestQdrantVectorStore::test_count PASSED
tests/storage/test_qdrant.py::TestQdrantVectorStore::test_count_with_filters PASSED
tests/storage/test_qdrant.py::TestQdrantVectorStore::test_get_nonexistent PASSED
tests/storage/test_qdrant.py::TestQdrantVectorStore::test_distance_metrics PASSED
tests/storage/test_qdrant_filters.py::TestQdrantFilterBuilding::test_simple_equality_filter PASSED
tests/storage/test_qdrant_filters.py::TestQdrantFilterBuilding::test_multiple_equality_filters PASSED
tests/storage/test_qdrant_filters.py::TestQdrantFilterBuilding::test_in_operator_filter PASSED
tests/storage/test_qdrant_filters.py::TestQdrantFilterBuilding::test_gte_operator_filter PASSED
tests/storage/test_qdrant_filters.py::TestQdrantFilterBuilding::test_lte_operator_filter PASSED
tests/storage/test_qdrant_filters.py::TestQdrantFilterBuilding::test_gte_and_lte_combined PASSED
tests/storage/test_qdrant_filters.py::TestQdrantFilterBuilding::test_mixed_operators_in_single_query PASSED
tests/test_placeholder.py::test_placeholder PASSED
tests/test_placeholder.py::test_fixture PASSED
tests/values/test_integration.py::TestIntegration::test_full_workflow PASSED
tests/values/test_integration.py::TestIntegration::test_invalid_value_rejected PASSED
tests/values/test_integration.py::TestIntegration::test_multiple_values_per_cluster PASSED
tests/values/test_integration.py::TestIntegration::test_real_embedding_consistency PASSED
tests/values/test_store.py::TestGetClusters::test_valid_axis PASSED
tests/values/test_store.py::TestGetClusters::test_sorted_by_size_descending PASSED
tests/values/test_store.py::TestGetClusters::test_invalid_axis PASSED
tests/values/test_store.py::TestGetClusters::test_domain_not_valid_axis PASSED
tests/values/test_store.py::TestGetClusters::test_all_valid_axes[full] PASSED
tests/values/test_store.py::TestGetClusters::test_all_valid_axes[strategy] PASSED
tests/values/test_store.py::TestGetClusters::test_all_valid_axes[surprise] PASSED
tests/values/test_store.py::TestGetClusters::test_all_valid_axes[root_cause] PASSED
tests/values/test_store.py::TestGetClusterMembers::test_get_members_success PASSED
tests/values/test_store.py::TestGetClusterMembers::test_invalid_cluster_id_format PASSED
tests/values/test_store.py::TestGetClusterMembers::test_invalid_axis_in_cluster_id PASSED
tests/values/test_store.py::TestGetClusterMembers::test_cluster_not_found PASSED
tests/values/test_store.py::TestGetClusterMembers::test_correct_collection_name PASSED
tests/values/test_store.py::TestValidateValueCandidate::test_valid_candidate_close_to_centroid PASSED
tests/values/test_store.py::TestValidateValueCandidate::test_invalid_candidate_far_from_centroid PASSED
tests/values/test_store.py::TestValidateValueCandidate::test_empty_cluster PASSED
tests/values/test_store.py::TestValidateValueCandidate::test_validation_threshold_calculation PASSED
tests/values/test_store.py::TestStoreValue::test_store_valid_value PASSED
tests/values/test_store.py::TestStoreValue::test_store_invalid_value_raises_error PASSED
tests/values/test_store.py::TestStoreValue::test_value_id_format PASSED
tests/values/test_store.py::TestStoreValue::test_stored_payload_structure PASSED
tests/values/test_store.py::TestListValues::test_list_all_values PASSED
tests/values/test_store.py::TestListValues::test_list_values_filtered_by_axis PASSED
tests/values/test_store.py::TestListValues::test_list_values_invalid_axis PASSED
tests/values/test_store.py::TestListValues::test_list_values_sorted_by_recency PASSED
tests/values/test_store.py::TestGetCluster::test_get_cluster_success PASSED
tests/values/test_store.py::TestGetCluster::test_get_cluster_invalid_format PASSED
tests/values/test_store.py::TestGetCluster::test_get_cluster_not_found PASSED

=============================== warnings summary ===============================
tests/clustering/test_clusterer.py: 208 warnings
tests/clustering/test_experience.py: 22 warnings
tests/clustering/test_integration.py: 10 warnings
  /Users/elliotmilco/Documents/GitHub/clams/.worktrees/SPEC-002-16/.venv/lib/python3.12/site-packages/sklearn/utils/deprecation.py:132: FutureWarning: 'force_all_finite' was renamed to 'ensure_all_finite' in 1.6 and will be removed in 1.8.
    warnings.warn(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================ 468 passed, 2 skipped, 240 warnings in 58.45s =================
